[2023-01-05T12:29:56.441+0000] {taskinstance.py:1087} INFO - Dependencies all met for <TaskInstance: uk_accidents_etl_pipeline.create_dashboard manual__2023-01-05T12:17:22.287490+00:00 [queued]>
[2023-01-05T12:29:56.469+0000] {taskinstance.py:1087} INFO - Dependencies all met for <TaskInstance: uk_accidents_etl_pipeline.create_dashboard manual__2023-01-05T12:17:22.287490+00:00 [queued]>
[2023-01-05T12:29:56.470+0000] {taskinstance.py:1283} INFO - 
--------------------------------------------------------------------------------
[2023-01-05T12:29:56.471+0000] {taskinstance.py:1284} INFO - Starting attempt 4 of 5
[2023-01-05T12:29:56.471+0000] {taskinstance.py:1285} INFO - 
--------------------------------------------------------------------------------
[2023-01-05T12:29:56.590+0000] {taskinstance.py:1304} INFO - Executing <Task(PythonOperator): create_dashboard> on 2023-01-05 12:17:22.287490+00:00
[2023-01-05T12:29:56.598+0000] {standard_task_runner.py:55} INFO - Started process 955 to run task
[2023-01-05T12:29:56.709+0000] {standard_task_runner.py:82} INFO - Running: ['***', 'tasks', 'run', 'uk_accidents_etl_pipeline', 'create_dashboard', 'manual__2023-01-05T12:17:22.287490+00:00', '--job-id', '38', '--raw', '--subdir', 'DAGS_FOLDER/milestone_3.py', '--cfg-path', '/tmp/tmpmsiwsc00']
[2023-01-05T12:29:56.720+0000] {standard_task_runner.py:83} INFO - Job 38: Subtask create_dashboard
[2023-01-05T12:29:56.902+0000] {task_command.py:389} INFO - Running <TaskInstance: uk_accidents_etl_pipeline.create_dashboard manual__2023-01-05T12:17:22.287490+00:00 [running]> on host ecc1437a0be2
[2023-01-05T12:29:57.126+0000] {taskinstance.py:1513} INFO - Exporting the following env vars:
AIRFLOW_CTX_DAG_OWNER=***
AIRFLOW_CTX_DAG_ID=uk_accidents_etl_pipeline
AIRFLOW_CTX_TASK_ID=create_dashboard
AIRFLOW_CTX_EXECUTION_DATE=2023-01-05T12:17:22.287490+00:00
AIRFLOW_CTX_TRY_NUMBER=4
AIRFLOW_CTX_DAG_RUN_ID=manual__2023-01-05T12:17:22.287490+00:00
[2023-01-05T12:30:16.298+0000] {logging_mixin.py:137} INFO - Dash is running on http://0.0.0.0:8050/
[2023-01-05T12:30:16.298+0000] {dash.py:1968} INFO - Dash is running on http://0.0.0.0:8050/

[2023-01-05T12:30:16.363+0000] {logging_mixin.py:137} INFO -  * Serving Flask app '***'
[2023-01-05T12:30:16.364+0000] {logging_mixin.py:137} INFO -  * Debug mode: off
[2023-01-05T12:30:16.366+0000] {_internal.py:224} INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8050
 * Running on http://172.19.0.3:8050
[2023-01-05T12:30:16.367+0000] {_internal.py:224} INFO - [33mPress CTRL+C to quit[0m
[2023-01-05T12:36:52.611+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:36:52] "GET / HTTP/1.1" 200 -
[2023-01-05T12:36:52.831+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:36:52] "GET /_dash-component-suites/dash/deps/polyfill@7.v2_7_1m1672702084.12.1.min.js HTTP/1.1" 200 -
[2023-01-05T12:36:52.844+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:36:52] "GET /_dash-component-suites/dash/deps/react-dom@16.v2_7_1m1672702084.14.0.min.js HTTP/1.1" 200 -
[2023-01-05T12:36:52.847+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:36:52] "GET /_dash-component-suites/dash/dash-renderer/build/dash_renderer.v2_7_1m1672702084.min.js HTTP/1.1" 200 -
[2023-01-05T12:36:52.860+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:36:52] "GET /_dash-component-suites/dash/deps/prop-types@15.v2_7_1m1672702084.8.1.min.js HTTP/1.1" 200 -
[2023-01-05T12:36:52.883+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:36:52] "GET /_dash-component-suites/dash/deps/react@16.v2_7_1m1672702084.14.0.min.js HTTP/1.1" 200 -
[2023-01-05T12:36:52.889+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:36:52] "GET /_dash-component-suites/dash/dcc/dash_core_components.v2_7_1m1672702084.js HTTP/1.1" 200 -
[2023-01-05T12:36:52.960+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:36:52] "GET /_dash-component-suites/dash/dcc/dash_core_components-shared.v2_7_1m1672702084.js HTTP/1.1" 200 -
[2023-01-05T12:36:52.981+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:36:52] "GET /_dash-component-suites/dash/html/dash_html_components.v2_0_7m1672702085.min.js HTTP/1.1" 200 -
[2023-01-05T12:36:53.010+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:36:53] "GET /_dash-component-suites/dash/dash_table/bundle.v5_2_1m1672702084.js HTTP/1.1" 200 -
[2023-01-05T12:36:53.596+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:36:53] "GET /_dash-dependencies HTTP/1.1" 200 -
[2023-01-05T12:36:54.593+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:36:54] "GET /_favicon.ico?v=2.7.1 HTTP/1.1" 200 -
[2023-01-05T12:36:55.463+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:36:55] "GET /_dash-layout HTTP/1.1" 200 -
[2023-01-05T12:36:56.173+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:36:56] "GET /_dash-component-suites/dash/dcc/async-graph.js HTTP/1.1" 200 -
[2023-01-05T12:36:56.262+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:36:56] "GET /_dash-component-suites/dash/dcc/async-plotlyjs.js HTTP/1.1" 200 -
[2023-01-05T12:37:42.362+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:37:42] "GET / HTTP/1.1" 200 -
[2023-01-05T12:37:42.920+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:37:42] "GET /_dash-dependencies HTTP/1.1" 200 -
[2023-01-05T12:37:43.946+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:37:43] "GET /_favicon.ico?v=2.7.1 HTTP/1.1" 200 -
[2023-01-05T12:37:45.098+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:37:45] "GET /_dash-layout HTTP/1.1" 200 -
[2023-01-05T12:37:45.737+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:37:45] "[36mGET /_dash-component-suites/dash/dcc/async-graph.js HTTP/1.1[0m" 304 -
[2023-01-05T12:37:45.755+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:37:45] "[36mGET /_dash-component-suites/dash/dcc/async-plotlyjs.js HTTP/1.1[0m" 304 -
[2023-01-05T12:42:06.373+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:42:06] "GET / HTTP/1.1" 200 -
[2023-01-05T12:42:06.425+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:42:06] "GET /_dash-component-suites/dash/deps/polyfill@7.v2_7_1m1672702084.12.1.min.js HTTP/1.1" 200 -
[2023-01-05T12:42:06.459+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:42:06] "GET /_dash-component-suites/dash/deps/react@16.v2_7_1m1672702084.14.0.min.js HTTP/1.1" 200 -
[2023-01-05T12:42:06.479+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:42:06] "GET /_dash-component-suites/dash/deps/react-dom@16.v2_7_1m1672702084.14.0.min.js HTTP/1.1" 200 -
[2023-01-05T12:42:06.493+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:42:06] "GET /_dash-component-suites/dash/deps/prop-types@15.v2_7_1m1672702084.8.1.min.js HTTP/1.1" 200 -
[2023-01-05T12:42:06.506+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:42:06] "GET /_dash-component-suites/dash/dash-renderer/build/dash_renderer.v2_7_1m1672702084.min.js HTTP/1.1" 200 -
[2023-01-05T12:42:06.514+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:42:06] "GET /_dash-component-suites/dash/dcc/dash_core_components.v2_7_1m1672702084.js HTTP/1.1" 200 -
[2023-01-05T12:42:06.515+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:42:06] "GET /_dash-component-suites/dash/dcc/dash_core_components-shared.v2_7_1m1672702084.js HTTP/1.1" 200 -
[2023-01-05T12:42:06.528+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:42:06] "GET /_dash-component-suites/dash/html/dash_html_components.v2_0_7m1672702085.min.js HTTP/1.1" 200 -
[2023-01-05T12:42:06.570+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:42:06] "GET /_dash-component-suites/dash/dash_table/bundle.v5_2_1m1672702084.js HTTP/1.1" 200 -
[2023-01-05T12:42:06.974+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:42:06] "GET /_dash-dependencies HTTP/1.1" 200 -
[2023-01-05T12:42:07.112+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:42:07] "GET /_favicon.ico?v=2.7.1 HTTP/1.1" 200 -
[2023-01-05T12:42:09.803+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:42:09] "GET /_dash-layout HTTP/1.1" 200 -
[2023-01-05T12:42:10.546+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:42:10] "GET /_dash-component-suites/dash/dcc/async-graph.js HTTP/1.1" 200 -
[2023-01-05T12:42:10.565+0000] {_internal.py:224} INFO - 172.19.0.1 - - [05/Jan/2023 12:42:10] "GET /_dash-component-suites/dash/dcc/async-plotlyjs.js HTTP/1.1" 200 -
[2023-01-05T12:42:39.584+0000] {local_task_job.py:224} WARNING - State of this instance has been externally set to restarting. Terminating instance.
[2023-01-05T12:42:39.608+0000] {process_utils.py:133} INFO - Sending Signals.SIGTERM to group 955. PIDs of all processes in the group: [955]
[2023-01-05T12:42:39.609+0000] {process_utils.py:84} INFO - Sending the signal Signals.SIGTERM to group 955
[2023-01-05T12:42:39.610+0000] {taskinstance.py:1483} ERROR - Received SIGTERM. Terminating subprocesses.
[2023-01-05T12:42:39.657+0000] {taskinstance.py:1772} ERROR - Task failed with exception
Traceback (most recent call last):
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/operators/python.py", line 175, in execute
    return_value = self.execute_callable()
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/operators/python.py", line 192, in execute_callable
    return self.python_callable(*self.op_args, **self.op_kwargs)
  File "/opt/airflow/dags/dashbord.py", line 56, in create_dashboard
    dcc.Graph(figure=histogram(df2, 'road_type')),
  File "/home/airflow/.local/lib/python3.7/site-packages/dash/dash.py", line 2133, in run_server
    self.run(*args, **kwargs)
  File "/home/airflow/.local/lib/python3.7/site-packages/dash/dash.py", line 1980, in run
    self.server.run(host=host, port=port, debug=debug, **flask_run_options)
  File "/home/airflow/.local/lib/python3.7/site-packages/flask/app.py", line 1188, in run
    run_simple(t.cast(str, host), port, self, **options)
  File "/home/airflow/.local/lib/python3.7/site-packages/werkzeug/serving.py", line 1098, in run_simple
    srv.serve_forever()
  File "/home/airflow/.local/lib/python3.7/site-packages/werkzeug/serving.py", line 741, in serve_forever
    super().serve_forever(poll_interval=poll_interval)
  File "/usr/local/lib/python3.7/socketserver.py", line 232, in serve_forever
    ready = selector.select(poll_interval)
  File "/usr/local/lib/python3.7/selectors.py", line 415, in select
    fd_event_list = self._selector.poll(timeout)
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/models/taskinstance.py", line 1485, in signal_handler
    raise AirflowException("Task received SIGTERM signal")
airflow.exceptions.AirflowException: Task received SIGTERM signal
[2023-01-05T12:42:39.716+0000] {taskinstance.py:1327} INFO - Marking task as UP_FOR_RETRY. dag_id=uk_accidents_etl_pipeline, task_id=create_dashboard, execution_date=20230105T121722, start_date=20230105T122956, end_date=20230105T124239
[2023-01-05T12:42:39.813+0000] {standard_task_runner.py:105} ERROR - Failed to execute job 38 for task create_dashboard (Task received SIGTERM signal; 955)
[2023-01-05T12:42:39.922+0000] {process_utils.py:79} INFO - Process psutil.Process(pid=955, status='terminated', exitcode=1, started='12:29:56') (955) terminated with exit code 1
